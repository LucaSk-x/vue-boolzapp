<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/db1680b8fb.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.0-beta1/css/bootstrap.min.css'
        integrity='sha512-o/MhoRPVLExxZjCFVBsm17Pkztkzmh7Dp8k7/3JrtNCHh0AQ489kwpfA3dPSHzKDe8YCuEhxXq3Y71eb/o6amg==' crossorigin='anonymous' />
    <link rel="stylesheet" href="Css/style.css">
    <title>WhatsApp Web</title>
</head>
<body>
    <div class="my-bg"></div>
    <div id="app">
        <div class="container my-container ">
            <div class="row">
                <div class="col-5"> <!-- small col left -->
                    <div class="contact-container d-flex flex-column">
                        <div class="info-contact">
                            <div class="user-info d-flex justify-content-between  p-2"> <!-- information user -->
                                <div class="left-info d-flex align-items-center">
                                    <div class="avatar-contain pe-2">
                                        <img class="w-100" src="../img/avatar_io.jpg" alt="">
                                    </div>
                                    <div>Lucas</div>
                                </div>
                                <div class="right-info d-flex align-items-center">
                                    <i class="fa-solid fa-circle-notch text-secondary"></i>
                                    <i class="fa-solid fa-message text-secondary"></i>
                                    <i class="fa-solid fa-ellipsis-vertical text-secondary"></i>
                                </div>
                            </div>
                            <div class="notifications  p-2"> <!-- notitication -->
                                <div class="noti-card d-flex align-items-center">
                                    <i class="fa-solid fa-bell-slash"></i>
                                    <div class="noti-info">
                                        <div>Ricevi notifiche di nuovi messaggi</div>
                                        <div class="text-secondary"><u>Attiva notiche desktop</u></div>
                                    </div>
                                </div>
                            </div>
                            <div class="search p-2">
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text" id="inputGroup-sizing-default"><i class="fa-solid fa-magnifying-glass text-secondary" @click="filterUser" ></i></span>
                                    </div>
                                    <input type="text" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default" placeholder="Cerca o inzia una nuova chat"  v-model="filterName">
                            </div>
                            </div>
                        </div>
                        <div class="list-contact p-2">
                            <ul class="list-group list-group-flush">
                                <li class="d-flex align-items-center list-group-item" v-for="item in list" @click="currUser(item)">
                                    <div class="avatar-list-chat">
                                        <img class="w-100" :src="'../img/avatar' + item.avatar + '.jpg'" alt="">
                                    </div>
                                    <div class="info-list-contact">
                                        <div class="font-weight-bold"> {{item.name}} </div>
                                        <div class="text-secondary">ultimo messaggio inviato</div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-7"><!-- big col right -->
                    <div class="chat-container d-flex flex-column h-100">
                        <div class="chat-info d-flex justify-content-between p-2 "><!-- info recipient -->
                            <div class="chat-info-left d-flex">
                                <div class="img-contain pe-2">
                                    <img class="w-100 rounded-circle" :src="'../img/avatar' + currentUser.avatar + '.jpg'" alt="">
                                </div>
                                <div class="recipient">
                                    <div>{{currentUser.name}}</div>
                                    <div>Ultimo accesso</div>
                                </div>
                            </div>
                            <div class="chat-info-right d-flex align-items-center">
                                <i class="fa-solid fa-magnifying-glass text-secondary"></i>
                                <i class="fa-solid fa-paperclip text-secondary"></i>
                                <i class="fa-solid fa-ellipsis-vertical text-secondary"></i>
                            </div>
                        </div>
                        <div class="message-chat overflow-auto flex-grow-1"><!-- chat with message -->
                            <div class="message-container d-flex flex-column">
                                <div class="message content-mess p-2 mt-3 mx-4 rounded-3"  :class="{'align-self-start received': mess.status==='received',  'align-self-end sent': mess.status==='sent' }" v-for="mess in currentUser.messages">
                                    <div class=""> {{mess.message}} </div>
                                </div>
                            </div>
                        </div>
                        <div class="write-message d-flex align-items-center">
                            <div class="emoji">
                                <i class="fa-solid fa-face-smile text-secondary py-2 px-4"></i>
                            </div>
                            <div class="text-input flex-grow-1 p-1">
                                <div class="input-group">
                                    <input type="text" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" v-model="inputText" v-on:keyup.enter="newInputMessage" >
                            </div>
                            </div>
                            <div class="vocal">
                                <i class="fa-solid fa-microphone text-secondary py-2 px-4"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="JavaScript/app.js"></script>
</body>
</html>